<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Secret Garden</title>
  <style>
    :root { --bg: #dff6df; } /* pastel green */
    html, body { height: 100%; }
    body {
      margin: 0;
      height: 100%;
      background: var(--bg);
      position: relative;
      overflow: hidden;
      cursor: crosshair;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    .sunflower {
      position: absolute;
      transform: translate(-50%, -50%) scale(0.9);
      opacity: 0;
      font-size: clamp(18px, 2.5vw, 36px);
      pointer-events: none; /* don't block clicks */
    }

    .sunflower-inner {
      display: inline-block;
    }

    /* Grow effect only once */
    .sunflower.show {
      animation: growIn 0.4s ease forwards;
    }

    @keyframes growIn {
      0% { transform: scale(0.2); opacity: 0; }
      60% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }

    /* Sway effect infinite */
    @keyframes swayLeft {
      0%,100% { transform: rotate(0deg); }
      50% { transform: rotate(-4deg); }
    }

    @keyframes swayRight {
      0%,100% { transform: rotate(0deg); }
      50% { transform: rotate(4deg); }
    }

    /* heading */
    .sunflower-heading {
      text-align: center;
      font-family: 'Great Vibes', cursive;
      font-size: 1.5rem;
      margin: 20px 0 40px;
      color: #2e5339;
      opacity: 0;
      transform: translateY(-20px);
      animation: fadeIn 1s ease forwards;
    }

    @keyframes fadeIn {
      to { opacity: 1; transform: translateY(0); }
    }

    /* Close button at top-right corner */
    .close-btn {
      position: fixed;
      top: 15px;
      right: 20px;
      background: rgba(0, 0, 0, 0.2);
      color: white;
      border: none;
      padding: 6px 12px;
      font-size: 1.2rem;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s;
      z-index: 10;
    }

    .close-btn:hover {
      background: rgba(0, 0, 0, 0.4);
    }

    /* tiny helper to exit */
    .hint {
      position: fixed;
      left: 12px;
      bottom: 12px;
      font-size: 12px;
      opacity: .6;
    }
  </style>
</head>
<body>
  <button class="close-btn" onclick="window.location.href='index.html'">‚úï</button>

  <h1 class="sunflower-heading">Our Own Sunflower Field üåª</h1>
  <div class="hint">Double-click / double-tap to plant üåª ‚Ä¢ Press ‚ÄúC‚Äù to clear (optional)</div>

  <script>
    const KEY = "secret_garden_sunflowers_v1";
    let flowers = JSON.parse(localStorage.getItem(KEY) || "[]");

    function plantAt(x, y) {
      flowers.push({ x, y });
      localStorage.setItem(KEY, JSON.stringify(flowers));
      addFlowerToDOM(x, y);
    }

    function addFlowerToDOM(x, y) {
      const el = document.createElement("div");
      el.className = "sunflower";
      el.style.left = x + "px";
      el.style.top = y + "px";

      const inner = document.createElement("span");
      inner.className = "sunflower-inner";
      inner.textContent = "üåª";

      // Random sway duration and direction
      const duration = (2.5 + Math.random() * 1.5).toFixed(1);
      const direction = Math.random() < 0.5 ? "swayLeft" : "swayRight";
      inner.style.animation = `${direction} ${duration}s ease-in-out infinite`;

      el.appendChild(inner);
      document.body.appendChild(el);

      // Trigger grow animation
      requestAnimationFrame(() => el.classList.add("show"));
    }

    // Load existing sunflowers
    flowers.forEach(f => addFlowerToDOM(f.x, f.y));

    // desktop double-click
    document.addEventListener("dblclick", (e) => {
      if (e.target.closest("a, button, input, textarea, select")) return;
      plantAt(e.clientX, e.clientY);
    });

    // mobile double-tap
    let lastTap = 0;
    document.addEventListener("touchend", (e) => {
      const now = Date.now();
      if (now - lastTap < 350) {
        const t = e.changedTouches[0];
        plantAt(t.clientX, t.clientY);
      }
      lastTap = now;
    }, { passive: true });

    // clear all sunflowers
    document.addEventListener("keydown", (e) => {
      if (e.key.toLowerCase() === "c") {
        if (confirm("Clear all sunflowers?")) {
          flowers = [];
          localStorage.removeItem(KEY);
          document.querySelectorAll(".sunflower").forEach(el => el.remove());
        }
      }
    });
  </script>
</body>
</html>
